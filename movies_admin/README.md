# Админ панель: редактор коллекции фильмов онлайн-кинотеатра

## Технологии
### Python 3.12, Django 5.1, PostgreSQL 16.4, wsgi

## Назначение
Сервис позволяет контент-менеджерам  добавлять новые фильмы и сериалы в
онлайн-кинотеатр. 

CRUD интерфейс для редактирования коллекции фильмов.
позволяет создавать и редактировать сущности из подготовленной схемы. 


## Основные сущности
- Пользователь — электронная почта, логин, пароль, дата регистрации, система прав. 
- Фильм – заголовок, содержание, дата создания, режиссеры, актеры, сценаристы, жанры, ссылка на файл.
- Сериал - заголовок, содержание, даты создания, режиссеры, актеры, сценаристы, жанры, ссылка на файл.
- Актер — Имя, фамилия, фильмы с его участием.
- Режиссер — Имя, фамилия, его фильмы.
- Сценарист — Имя, фамилия, его фильмы.
- Жанр — Название, описание

### Основные страницы и формы
1. **Листинг категорий** — это главная страница с группировкой по темам.

2. **Листинг фильмов с пагинацией по 100 фильмов на странице.**
Доступны виды сортировки: названию, рейтингу, дате создания, дате добавления и обновления фильма.  
В шапке сайта находятся:
- логотип,
- поисковая строка для быстрого поиска по заголовку и содержимому фильма,
- кнопка «Добавить фильм», которая доступна только пользователем с правами на добавление.

3. **Страница добавления и редактирования фильма.** Доступна только
для пользователей с правами на добавление. В форму вводится
заголовок, описание и загружается фильм. Выбор жанров, актёров,
сценаристов, режиссёров происходит через автодополнение.  
При обработке формы проверяется валидность данных:
- Если фильм добавлен успешно, пользователя перебрасывает на страницу редактирования фильма.
- Если возникли ошибки, они отобразятся в форме. На странице есть история изменений.

4. **Страница добавления сериала.** Доступна только для пользователей
с правами на добавление. В форму сериала вводится заголовок,
описание и остальные атрибуты. Группирует фильмы в блок.  
При обработке формы проверятся валидность данных:
- Если фильм успешно добавлен, пользователя перебрасывает на страницу фильма.
- Если возникли ошибки, они отобразятся в форме. На странице есть история изменений.

5. **Страница истории изменений.** Доступна только для пользователей с
правами на добавление. Показывает, какой пользователь в какое
время и какую операцию выполнил над объектом.

6. **Форма добавления и редактирование пользователя.** Состоит из
исходных полей Django User. В форме можно выбрать, какие права
есть у нового пользователя.

7. **Форма авторизации.** Состоит из полей «Логин» и «Пароль». Форма
работает по классическому сценарию:
- При успешной авторизации пользователь перебрасывается на исходную страницу.
- Если пользователь переходит на страницу добавления фильма без авторизации,  он перебросывается на окно логина и страницу добавления фильма.
- При неуспешной авторизации в форме выводятся сообщения об ошибках.

8. **Форма разлогина.** Кнопка в шапке интерфейса. После выполнения
перенаправляет на форму авторизации.



## Развертывание
### 1. Подготовка

1. Поднять БД PostgreSQL
2. Определить настройки подключения и ETL-скрипта в .env (см. .env.example)


### 2. Установка и запуск
#### Настроить окружение
В папке сервиса:
```bash
python -m venv venv
source venv/bin/activate
pip install -r requirements/dev.txt
```


#### Запустить сервер
```bash
./manage.py runserver
```